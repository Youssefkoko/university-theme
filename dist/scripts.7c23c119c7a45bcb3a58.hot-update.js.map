{"version":3,"sources":["webpack:///./js/modules/Search.js"],"names":["Search","constructor","addSearchHTML","resultsDiv","document","querySelector","openButton","querySelectorAll","closeButton","searchOverlay","searchField","isOverlayOpen","isSpinnerVisible","previousValue","typingTimer","events","forEach","el","addEventListener","e","preventDefault","openOverlay","closeOverlay","keyPressDispatcher","typingLogic","value","clearTimeout","innerHTML","setTimeout","getResults","bind","response","axios","get","universityData","root_url","results","data","generalInfo","length","map","item","permalink","title","postType","authorName","join","programs","professors","image","campuses","month","day","description","console","log","keyCode","activeElement","tagName","classList","add","body","focus","remove","insertAdjacentHTML"],"mappings":"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","file":"scripts.7c23c119c7a45bcb3a58.hot-update.js","sourcesContent":["import axios from \"axios\"\r\n\r\nclass Search {\r\n  // 1. describe and create/initiate our object\r\n  constructor() {\r\n    this.addSearchHTML()\r\n    this.resultsDiv = document.querySelector(\"#search-overlay__results\")\r\n    this.openButton = document.querySelectorAll(\".js-search-trigger\")\r\n    this.closeButton = document.querySelector(\".search-overlay__close\")\r\n    this.searchOverlay = document.querySelector(\".search-overlay\")\r\n    this.searchField = document.querySelector(\"#search-term\")\r\n    this.isOverlayOpen = false\r\n    this.isSpinnerVisible = false\r\n    this.previousValue\r\n    this.typingTimer\r\n    this.events()\r\n  }\r\n\r\n  // 2. events\r\n  events() {\r\n    this.openButton.forEach(el => {\r\n      el.addEventListener(\"click\", e => {\r\n        e.preventDefault()\r\n        this.openOverlay()\r\n      })\r\n    })\r\n\r\n    this.closeButton.addEventListener(\"click\", () => this.closeOverlay())\r\n    document.addEventListener(\"keydown\", e => this.keyPressDispatcher(e))\r\n    this.searchField.addEventListener(\"keyup\", () => this.typingLogic())\r\n  }\r\n\r\n  // 3. methods (function, action...)\r\n  typingLogic() {\r\n    if (this.searchField.value != this.previousValue) {\r\n      clearTimeout(this.typingTimer)\r\n\r\n      if (this.searchField.value) {\r\n        if (!this.isSpinnerVisible) {\r\n          this.resultsDiv.innerHTML = '<div class=\"spinner-loader\"></div>'\r\n          this.isSpinnerVisible = true\r\n        }\r\n        this.typingTimer = setTimeout(this.getResults.bind(this), 750)\r\n      } else {\r\n        this.resultsDiv.innerHTML = \"\"\r\n        this.isSpinnerVisible = false\r\n      }\r\n    }\r\n    this.previousValue = this.searchField.value\r\n  }\r\n\r\n  async getResults() {\r\n    try {\r\n      const response = await axios.get(universityData.root_url + \"/wp-json/university/v1/search?term=\" + this.searchField.value)\r\n      const results = response.data\r\n      this.resultsDiv.innerHTML = `\r\n        <div class=\"row\">\r\n          <div class=\"one-third\">\r\n            <h2 class=\"search-overlay__section-title\">General Information</h2>\r\n            ${results.generalInfo.length ? '<ul class=\"link-list min-list\">' : \"<p>No general information matches that search.</p>\"}\r\n              ${results.generalInfo.map(item => `<li><a href=\"${item.permalink}\">${item.title}</a> ${item.postType == \"post\" ? `by ${item.authorName}` : \"\"}</li>`).join(\"\")}\r\n            ${results.generalInfo.length ? \"</ul>\" : \"\"}\r\n          </div>\r\n          <div class=\"one-third\">\r\n            <h2 class=\"search-overlay__section-title\">Programs</h2>\r\n            ${results.programs.length ? '<ul class=\"link-list min-list\">' : `<p>No programs match that search. <a href=\"${universityData.root_url}/programs\">View all programs</a></p>`}\r\n              ${results.programs.map(item => `<li><a href=\"${item.permalink}\">${item.title}</a></li>`).join(\"\")}\r\n            ${results.programs.length ? \"</ul>\" : \"\"}\r\n\r\n            <h2 class=\"search-overlay__section-title\">Professors</h2>\r\n            ${results.professors.length ? '<ul class=\"professor-cards\">' : `<p>No professors match that search.</p>`}\r\n              ${results.professors\r\n          .map(\r\n            item => `\r\n                <li class=\"professor-card__list-item\">\r\n                  <a class=\"professor-card\" href=\"${item.permalink}\">\r\n                    <img class=\"professor-card__image\" src=\"${item.image}\">\r\n                    <span class=\"professor-card__name\">${item.title}</span>\r\n                  </a>\r\n                </li>\r\n              `\r\n          )\r\n          .join(\"\")}\r\n            ${results.professors.length ? \"</ul>\" : \"\"}\r\n\r\n          </div>\r\n          <div class=\"one-third\">\r\n            <h2 class=\"search-overlay__section-title\">Campuses</h2>\r\n            ${results.campuses.length ? '<ul class=\"link-list min-list\">' : `<p>No campuses match that search. <a href=\"${universityData.root_url}/campuses\">View all campuses</a></p>`}\r\n              ${results.campuses.map(item => `<li><a href=\"${item.permalink}\">${item.title}</a></li>`).join(\"\")}\r\n            ${results.campuses.length ? \"</ul>\" : \"\"}\r\n\r\n            <h2 class=\"search-overlay__section-title\">Events</h2>\r\n            ${results.events.length ? \"\" : `<p>No events match that search. <a href=\"${universityData.root_url}/events\">View all events</a></p>`}\r\n              ${results.events\r\n          .map(\r\n            item => `\r\n                <div class=\"event-summary\">\r\n                  <a class=\"event-summary__date t-center\" href=\"${item.permalink}\">\r\n                    <span class=\"event-summary__month\">${item.month}</span>\r\n                    <span class=\"event-summary__day\">${item.day}</span>  \r\n                  </a>\r\n                  <div class=\"event-summary__content\">\r\n                    <h5 class=\"event-summary__title headline headline--tiny\"><a href=\"${item.permalink}\">${item.title}</a></h5>\r\n                    <p>${item.description} <a href=\"${item.permalink}\" class=\"nu gray\">Learn more</a></p>\r\n                  </div>\r\n                </div>\r\n              `\r\n          )\r\n          .join(\"\")}\r\n\r\n          </div>\r\n        </div>\r\n      `\r\n      this.isSpinnerVisible = false\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  keyPressDispatcher(e) {\r\n    if (e.keyCode == 83 && !this.isOverlayOpen && document.activeElement.tagName != \"INPUT\" && document.activeElement.tagName != \"TEXTAREA\") {\r\n      this.openOverlay()\r\n    }\r\n\r\n    if (e.keyCode == 27 && this.isOverlayOpen) {\r\n      this.closeOverlay()\r\n    }\r\n  }\r\n\r\n  openOverlay() {\r\n    this.searchOverlay.classList.add(\"search-overlay--active\")\r\n    document.body.classList.add(\"body-no-scroll\")\r\n    this.searchField.value = \"\"\r\n    setTimeout(() => this.searchField.focus(), 301)\r\n    this.isOverlayOpen = true\r\n    return false;\r\n  }\r\n\r\n  closeOverlay() {\r\n    this.searchOverlay.classList.remove(\"search-overlay--active\")\r\n    document.body.classList.remove(\"body-no-scroll\")\r\n\r\n    this.isOverlayOpen = false\r\n  }\r\n\r\n  addSearchHTML() {\r\n    document.body.insertAdjacentHTML(\r\n      \"beforeend\",\r\n      `\r\n      <div class=\"search-overlay\">\r\n        <div class=\"search-overlay__top\">\r\n          <div class=\"container\">\r\n            <i class=\"fa fa-search search-overlay__icon\" aria-hidden=\"true\"></i>\r\n            <input type=\"text\" class=\"search-term\" placeholder=\"What are you looking for?\" id=\"search-term\">\r\n            <i class=\"fa fa-window-close search-overlay__close\" aria-hidden=\"true\"></i>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"container\">\r\n          <div id=\"search-overlay__results\"></div>\r\n        </div>\r\n\r\n      </div>\r\n    `\r\n    )\r\n  }\r\n}\r\n\r\nexport default Search\r\n"],"sourceRoot":""}