{"version":3,"sources":["webpack:///./js/modules/Search.js"],"names":["Search","constructor","addSearchHTML","resultsDiv","$","openButton","closeButton","searchOverlay","searchField","typingTimer","isSpinnerVisibale","previousValue","events","isOverlayOpen","on","openOverlay","bind","closeOverlay","document","keyPressToggle","typingLogic","val","clearTimeout","html","setTimeout","getResults","getJSON","themeData","root_url","results","generalInfo","length","map","item","link","title","postType","authorName","join","programs","professors","image","campuses","e","keyCode","is","addClass","focus","removeClass","append"],"mappings":"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","file":"scripts.5ea874d6d5d1e6f91224.hot-update.js","sourcesContent":["import $ from 'jquery';\r\nclass Search {\r\n  // Descripe or Initiate or Create the Object\r\n  constructor(){\r\n    this.addSearchHTML();\r\n    this.resultsDiv = $('#search-overlay__results');\r\n    this.openButton = $('.js-search-trigger');\r\n    this.closeButton = $('.search-overlay__close');\r\n    this.searchOverlay = $('.search-overlay');\r\n    this.searchField = $('#search-term');\r\n    this.typingTimer;\r\n    this.isSpinnerVisibale = false;\r\n    this.previousValue;\r\n    this.events();\r\n    this.isOverlayOpen = false;\r\n  }\r\n  // 2. Events\r\n  events(){\r\n    this.openButton.on('click', this.openOverlay.bind(this));\r\n    this.closeButton.on('click', this.closeOverlay.bind(this));\r\n    $(document).on('keydown', this.keyPressToggle.bind(this));\r\n    this.searchField.on('keyup', this.typingLogic.bind(this));\r\n  }\r\n  // 3. Methods (Functions, Action .. )\r\n  typingLogic(){\r\n    // check if field does not change its value if so then the Spinner can work\r\n    if(this.searchField.val() !== this.previousValue){\r\n      clearTimeout(this.typingTimer);\r\n      if(this.searchField.val()){\r\n        if(!this.isSpinnerVisibale){\r\n          this.resultsDiv.html('<div class=\"spinner-loader\"></div>')\r\n          this.isSpinnerVisibale = true;\r\n        }    \r\n        this.typingTimer = setTimeout(this.getResults.bind(this), 750);\r\n      }else{\r\n        this.resultsDiv.html('');\r\n        this.isSpinnerVisibale = false;\r\n      }\r\n      // end if \r\n    }\r\n    this.previousValue = this.searchField.val();\r\n  }\r\n  getResults(){\r\n    $.getJSON(themeData.root_url + '/wp-json/university/v1/search?term='+ this.searchField.val(), (results) => {\r\n      this.resultsDiv.html(`\r\n      <div class=\"row\">\r\n        <div class=\"one-third\">\r\n          <h2 class=\"search-overlay__section-title\">General Info:</h2>\r\n          ${results.generalInfo.length ? `<ul class=\"link-list min-list\" >` : `<p>No Search Found.</p>`}\r\n\r\n          ${results.generalInfo.map(item => `\r\n            <li> \r\n              <a href=\"${item.link}\">${item.title}</a>\r\n              ${item.postType == 'post' ? `By: ${item.authorName}` : ''}\r\n            </li>` \r\n          ).join('')}\r\n        \r\n        ${results.generalInfo.length ? `</ul>` : ''}\r\n        </div>  \r\n        <div class=\"one-third\">\r\n          <h2 class=\"search-overlay__section-title\">Programs</h2>\r\n          ${results.programs.length ? `<ul class=\"link-list min-list\" >` : `<p>No Program Found. <a href=\"${themeData.root_url}/programs\">View All Programs</a> </p>`}\r\n\r\n          ${results.programs.map(item => `\r\n            <li> \r\n              <a href=\"${item.link}\">${item.title}</a>\r\n              \r\n            </li>` \r\n          ).join('')}\r\n        \r\n        ${results.programs.length ? `</ul>` : ''}\r\n          <h2 class=\"search-overlay__section-title\">Professors</h2>\r\n          ${results.professors.length ? `<ul class=\"professor-cards\" >` : `<p>No Professor Found.</p>`}\r\n\r\n          ${results.professors.map(item => `\r\n            <li class=\"professor-card__list-item\" >\r\n              <a class=\"professor-card\" href=\"${item.link}\">\r\n                <img src=\"${item.image}\" class=\"professor-card__image\" alt=\"\">\r\n                <span class=\"professor-card__name\">\r\n                ${item.title}\r\n                </span>\r\n              </a>\r\n             </li>\r\n            ` \r\n          ).join('')}\r\n        \r\n        ${results.professors.length ? `</ul>` : ''}\r\n        </div>  \r\n        <div class=\"one-third\">\r\n          <h2 class=\"search-overlay__section-title\">Campuses</h2>\r\n          ${results.campuses.length ? `<ul class=\"link-list min-list\" >` : `<p>No Campus Found. <a href=\"${themeData.root_url}/campuses\">View All Campuses</a> </p>`}\r\n\r\n          ${results.campuses.map(item => `\r\n            <li> \r\n              <a href=\"${item.link}\">${item.title}</a>\r\n              \r\n            </li>` \r\n          ).join('')}\r\n        \r\n        ${results.campuses.length ? `</ul>` : ''}\r\n          <h2 class=\"search-overlay__section-title\">Events</h2>\r\n          ${results.events.length ? '' : `<p>No Event Found. <a href=\"${themeData.root_url}/events\">View All Events</a> </p>`}\r\n\r\n          ${results.events.map(item => `\r\n            <div class=\"event-summary\">\r\n              <a class=\"event-summary__date t-center\" href=\"${item.link}\">\r\n                <span class=\"event-summary__month\">\r\n                <?php \r\n                $eventDate = new DateTime(get_field('event_date'));\r\n                echo $eventDate->format('M');\r\n                  ?></span>\r\n                <span class=\"event-summary__day\"><?php echo $eventDate->format('d'); ?></span>\r\n              </a>\r\n              <div class=\"event-summary__content\">\r\n                <h5 class=\"event-summary__title headline headline--tiny\">\r\n                  <a href=\"<?php the_permalink(); ?>\">\r\n                    <?php the_title(); ?>\r\n                  </a>\r\n                </h5>\r\n                <p> <?php if(has_excerpt()){\r\n                        echo get_the_excerpt();\r\n                    }else{\r\n                    echo wp_trim_words(get_the_content(), 18);\r\n                    } ?> \r\n                  <a href=\"<?php the_permalink(); ?>\"\r\n                      class=\"nu gray\">Learn more\r\n                  </a>\r\n                </p>\r\n              </div>\r\n            </div>\r\n            ` \r\n          ).join('')}\r\n        \r\n        ${results.events.length ? `</ul>` : ''}\r\n        </div>  \r\n      </div>\r\n      `);\r\n      isSpinnerVisibale = false;\r\n    })\r\n    // Old way to request API \r\n    // $.when(\r\n    //   $.getJSON(themeData.root_url + '/wp-json/wp/v2/posts?search='+ this.searchField.val()), \r\n    //   $.getJSON(themeData.root_url + '/wp-json/wp/v2/pages?search='+ this.searchField.val())\r\n    // ).then((posts, pages) => {\r\n    //   var compinedResults = posts[0].concat(pages[0]);\r\n    //   this.resultsDiv.html(`\r\n    //   <h2>General Information: </h2>\r\n    //     ${compinedResults.length ? `<ul class=\"link-list min-list\" >` : `<p>No Search Found.</p>`}\r\n\r\n    //       ${compinedResults.map(item => `\r\n    //         <li> \r\n    //           <a href=\"${item.link}\">${item.title.rendered}</a>\r\n    //           ${item.type == 'post' ? `By: ${item.authorName}` : ''}\r\n    //         </li>` \r\n    //       ).join('')}\r\n        \r\n    //     ${compinedResults.length ? `</ul>` : ''}\r\n    //   `);\r\n    // }, () => {\r\n    //   this.resultsDiv.html('Unexpected error, Please Try Again.');\r\n    // })\r\n\r\n\r\n  }\r\n  keyPressToggle(e){\r\n// check the key code and OverLay is not Open and if the input fields are NOT focus\r\n    if(e.keyCode == 83 && !this.isOverlayOpen && !$('input, textarea').is(':focus')){\r\n      this.openOverlay();\r\n    }\r\n    if(e.keyCode == 27 &&  this.isOverlayOpen){\r\n      this.closeOverlay();\r\n    }\r\n  }\r\n  openOverlay(){\r\n    this.searchOverlay.addClass('search-overlay--active');\r\n    $('body').addClass('body-no-scroll');\r\n    setTimeout(() => this.searchField.focus(), 301);\r\n    this.isOverlayOpen = true;\r\n  }\r\n  closeOverlay(){\r\n  this.searchOverlay.removeClass('search-overlay--active');\r\n  $('body').removeClass('body-no-scroll');\r\n  this.searchField.val('');\r\n  this.isOverlayOpen = false;\r\n  }\r\n  addSearchHTML(){\r\n    $('body').append(`\r\n    <div class=\"search-overlay\">\r\n    <div class=\"search-overlay__top\">\r\n      <div class=\"container\">\r\n        <i class=\"fa fa-search search-overlay__icon\" aria-hidden=\"true\"></i>\r\n        <input type=\"text\" name=\"\" class=\"search-term\" id=\"search-term\" placeholder=\"Search...\">\r\n        <i class=\"fa fa-window-close search-overlay__close\" aria-hidden=\"true\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"container\">\r\n      <div id=\"search-overlay__results\">\r\n      hello\r\n      </div>\r\n    </div>\r\n  </div>\r\n    `);\r\n  }\r\n\r\n} \r\n\r\nexport default Search;"],"sourceRoot":""}